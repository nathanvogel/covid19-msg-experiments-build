(this["webpackJsonpcovid19-msg-experiments"]=this["webpackJsonpcovid19-msg-experiments"]||[]).push([[0],{13:function(e,n,t){},24:function(e,n,t){"use strict";t.r(n);var o=t(0),i=t.n(o),r=t(5),a=t.n(r),s=(t(13),t(6)),l=t(7),c=t.n(l);function u(){var e=Object(s.a)(["\n      #pragma vscode_glsllint_stage : frag\n      // Created by inigo quilez - iq/2014\n      // License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n \n      const mat2 m = mat2( 0.80,  0.60, -0.60,  0.80 );\n\n      float hash( vec2 p )\n      {\n        float h = dot(p,vec2(127.1,311.7));\n        return -1.0 + 2.0*fract(sin(h)*43758.5453123);\n      }\n\n      float noise( in vec2 p )\n      {\n          vec2 i = floor( p );\n          vec2 f = fract( p );\n        \n        vec2 u = f*f*(3.0-2.0*f);\n\n        return mix( mix(hash(i + vec2(0.0,0.0)), \n                        hash(i + vec2(1.0,0.0)), u.x),\n                    mix(hash(i + vec2(0.0,1.0)), \n                        hash(i + vec2(1.0,1.0)), u.x), u.y);\n      }\n\n      float fbm( vec2 p )\n      {\n        float f = 0.0;\n        f += 0.5000*noise( p ); p = m*p*2.02;\n        f += 0.2500*noise( p ); p = m*p*2.03;\n        f += 0.1250*noise( p ); p = m*p*2.01;\n        f += 0.0625*noise( p );\n        return f/0.9375;\n      }\n\n      vec2 fbm2( in vec2 p )\n      {\n          return vec2( fbm(p.xy), fbm(p.yx) );\n      }\n      // --- End of: Created by inigo quilez --------------------\n\n      float band(float t,  float start, float end, float blur) {\n        return (\n            smoothstep(start - blur, start + blur, t) *\n            smoothstep(end + blur, end - blur, t)\n        );\n      }\n\n      float rectangle(vec2 uv, float xStart, float xEnd, float yStart, float yEnd, vec2 blur) {\n        float band1 = band(uv.x, xStart, xEnd, blur.x);\n        float band2 = band(uv.y, yStart, yEnd, blur.y);\n        return band1 * band2;\n      }\n\n      float remap(float value, float low1, float high1, float low2, float high2) {\n        return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n      }\n\n      /**\n       * Drawing assumed to be from front to back stage (i.e. closest first):\n       * (which allows to stop as soon as opacity is 100% or above some threshold like 99.5%)\n       */\n      vec4 composeFTB(vec4 current, vec4 layer) {\n        return current + (1.0 - current.a) * vec4(layer.rgb, 1) * layer.a;\n      }\n\n      /**\n       * Drawing assumed to be from back to front stage (i.e. closest last):\n       */\n      vec4 composeBTF(vec4 current, vec4 layer) {\n        return mix(current, vec4(layer.rgb, 1.0), layer.a);\n      }\n\n      vec3 map( vec2 p )\n      {   \n          p *= 0.7;\n\n          float f = dot( fbm2( 1.0*(0.05*iTime + p + fbm2(-0.5*iTime+2.0*(p + fbm2(4.0*p)))) ), vec2(1.0,-1.0) );\n\n          float bl = smoothstep( -0.8, 0.8, f );\n\n          float ti = smoothstep( -1.0, 1.0, fbm(p) );\n\n          return mix( mix(vec3(0.50,0.00,0.00), \n                          vec3(1.00,0.75,0.35), ti ), \n                          vec3(0.00,0.00,0.02), bl );\n      }\n\n      void mainImage( out vec4 fragColor, in vec2 fragCoord )\n      {\n          vec2 p = 2.0 *(fragCoord.xy - iResolution.xy)/iResolution.y;\n          \n\n          float e = 0.04;//1.45;\n\n          vec3 colc = map( p               ); float gc = dot(colc,vec3(0.333));\n          vec3 cola = map( p + vec2(e,0.0) ); float ga = dot(cola,vec3(0.333));\n          vec3 colb = map( p + vec2(0.0,e) ); float gb = dot(colb,vec3(0.333));\n          \n          //vec3 nor = normalize( vec3(ga-gc, e, gb-gc ) );\n\n          vec3 col = colc;\n          //col += vec3(1.0,0.7,0.6)*8.0*abs(2.0*gc-ga-gb);\n          //col *= 1.0+0.2*nor.y*nor.y;\n          //col += 0.05*nor.y*nor.y*nor.y;\n          \n          \n          //vec2 q = fragCoord.xy/iResolution.xy;\n          //col *= pow(16.0*q.x*q.y*(1.0-q.x)*(1.0-q.y),0.1);\n          \n          //fragColor = vec4( col, 1.0 );\n          //vec2 a = fbm2(vec2(2.0, 1.0));\n          // vec2 a = fragCoord / iResolution.xy; \n\n          float speed = 0.5;\n          float speed1 = speed * iTime * MIDI1;\n          float speed2 = -speed * iTime;\n          vec2 theNoise = fbm2(speed1 + p + fbm2(speed2 + 2.0 * (p + fbm2(4.0*p))));\n          float noise = (theNoise.x + theNoise.y) / 2.0;\n\n          vec2 uv = fragCoord.xy/iResolution.xy;\n          vec2 blur = MIDI3 * vec2(max(iResolution.x, iResolution.y) * 0.11);\n\n          float rect = rectangle(\n            fragCoord, \n            DOM1_left - blur.x/2.0, \n            DOM1_right + blur.x/2.0, \n            DOM1_bottom - blur.y/2.0, \n            DOM1_top + blur.y/2.0, \n            blur\n          );\n          float rectBlurredMore = rectangle(\n            fragCoord, \n            DOM1_left - blur.x/2.0, \n            DOM1_right + blur.x/2.0, \n            DOM1_bottom - blur.y/2.0, \n            DOM1_top + blur.y/2.0, \n            blur * 1.8\n          );\n\n          float mask = mix(rectBlurredMore * remap(\n            noise, 0.0, 1.0, \n            rect, \n            1.0\n          ), rect, 0.5);\n\n          vec4 color = vec4(1.0);\n          color = composeBTF(color, vec4(uv, MIDI2, mask));\n\n          fragColor = color;\n      }\n      "]);return u=function(){return e},e}var f=function(){return Object(o.useEffect)((function(){new c.a(u().toString(),!1,{midiBindings:[[176,48,{from:0,to:10,initial:.8}],[176,49],[176,50],[176,51],[176,52],[176,53],[176,54],[176,55]],midiLogs:!1,domBindings:[{elem:document.getElementById("hello")}],canvas:document.getElementById("background")})}),[]),i.a.createElement("div",null,i.a.createElement("div",{id:"hello"},"Hello"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,n,t){"use strict";e.exports=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var n=t(14);return function(){function t(e,o,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");var r=/\(\s*out\s+vec4\s+(\S+)\s*,\s*in\s+vec2\s+(\S+)\s*\)/,a=e.match(r);e=(e=e.replace("mainImage","main")).replace(r,"()");var s=this.uniforms={iResolution:{type:"vec3",value:[window.innerWidth,window.innerHeight,0]},iTime:{type:"float",value:0},iTimeDelta:{type:"float",value:0},iFrame:{type:"int",value:0},iMouse:{type:"vec4",value:[0,0,0,0]}};this.options=i,this.debouncedLogMIDIState=n(this.logMIDIState,1e3),this.setupMIDIBindings(),this.setupDOMBindings(),e=(a?"#define ".concat(a[1]," gl_FragColor\n#define ").concat(a[2]," gl_FragCoord.xy\n"):"")+e,e="precision highp float;\n"+(e=Object.keys(s).map((function(e){return{name:e,type:s[e].type}})).reduce((function(e,n){return e+"uniform ".concat(n.type," ").concat(n.name,";\n")}),"")+e),(i=this.canvas=(r=i&&i.canvas)?i.canvas:document.createElement("canvas")).width=window.innerWidth,i.height=window.innerHeight,i.style.position="fixed",i.style.left=0,i.style.top=0,r||document.body.append(i);var l=this.gl=i.getContext("webgl");l.clearColor(0,0,0,0),i=this.vertexShader=l.createShader(l.VERTEX_SHADER),l.shaderSource(i,"\n      attribute vec2 position;\n      void main() {\n      gl_Position = vec4(position, 0.0, 1.0);\n      }\n    "),l.compileShader(i),r=this.fragmentShader=l.createShader(l.FRAGMENT_SHADER),l.shaderSource(r,e),l.compileShader(r);var c=this.program=l.createProgram();l.attachShader(c,i),l.attachShader(c,r),l.linkProgram(c),e=this.vertices=new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i=this.buffer=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,i),l.bufferData(l.ARRAY_BUFFER,e,l.STATIC_DRAW),l.useProgram(c),c.position=l.getAttribLocation(c,"position"),l.enableVertexAttribArray(c.position),l.vertexAttribPointer(c.position,2,l.FLOAT,!1,0,0),Object.keys(s).forEach((function(e,n){s[e].location=l.getUniformLocation(c,e)})),this.reportErrors(),this._bind("mouseDown","mouseMove","mouseUp","render","resize","setupMIDIBindings","onMIDIMessage","logMIDIState","setupDOMBindings","updateDOMBindings"),window.addEventListener("mousedown",this.mouseDown),window.addEventListener("mousemove",this.mouseMove),window.addEventListener("mouseup",this.mouseUp),window.addEventListener("resize",this.resize),"NO_RENDER"!==o&&this.render()}return function(n,t,o){t&&e(n.prototype,t),o&&e(n,o)}(t,[{key:"_bind",value:function(){for(var e=this,n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];t.forEach((function(n){return e[n]=e[n].bind(e)}))}},{key:"mouseDown",value:function(e){this.mousedown=!0,this.uniforms.iMouse.value[2]=e.clientX,this.uniforms.iMouse.value[3]=e.clientY}},{key:"mouseMove",value:function(e){this.mousedown&&(this.uniforms.iMouse.value[0]=e.clientX,this.uniforms.iMouse.value[1]=e.clientY)}},{key:"mouseUp",value:function(e){this.mousedown=!1,this.uniforms.iMouse.value[2]=0,this.uniforms.iMouse.value[3]=0}},{key:"setupDOMBindings",value:function(){if(this.options&&this.options.domBindings){var e=this.options.domBindings;this.domList=[];for(var n=0;n<e.length;n+=1){var t=e[n];if(t&&t.elem)for(var o in t={elem:t.elem,variablePrefix:"DOM".concat(n+1,"_")},this.domList.push(t),t=this.getDOMNodeCoords(t))this.uniforms[o]={type:"float",value:t[o]};else console.log("Invalid DOM binding: "+t)}}}},{key:"updateDOMBindings",value:function(){var e=!0,n=!1,t=void 0;try{for(var o,i=this.domList[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var r,a=this.getDOMNodeCoords(o.value);for(r in a)this.uniforms[r].value=a[r]}}catch(s){n=!0,t=s}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},{key:"getDOMNodeCoords",value:function(e){var n=e.elem.getBoundingClientRect(),t={};return t[e.variablePrefix+"top"]=window.innerHeight-n.top,t[e.variablePrefix+"bottom"]=window.innerHeight-n.bottom,t[e.variablePrefix+"left"]=n.left,t[e.variablePrefix+"right"]=n.right,t[e.variablePrefix+"height"]=n.height,t[e.variablePrefix+"width"]=n.width,t}},{key:"setupMIDIBindings",value:function(){var e=this;if(this.options&&this.options.midiBindings){this.midiList={};for(var n=this.options.midiBindings,t=0;t<n.length;t+=1){var o=n[t];if(!Array.isArray(o)||2>o.length)console.log("Invalid MIDI command/note: "+o),console.log("It should be an array of [command, note].");else{var i=o[0]+"_"+o[1];(o=3<=o.length&&o[2]?o[2]:{}).variableName=o.variableName||"MIDI"+(t+1),this.uniforms[o.variableName]={type:"float",value:"number"==typeof o.initial?o.initial:1},this.midiList[i]=o}}navigator.requestMIDIAccess?navigator.requestMIDIAccess().then((function(n){e.options.midiLogs&&console.log("Successful MIDI setup:",n);var t=!0,o=!1,i=void 0;try{for(var r,a=n.inputs.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)r.value.onmidimessage=e.onMIDIMessage}catch(s){o=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(o)throw i}}}),(function(){console.log("Could not setup MIDI devices.")})):console.log("WebMIDI is not supported in this browser.")}}},{key:"onMIDIMessage",value:function(e){if(this.midiList)if(e){var n=this.midiList[e.data[0]+"_"+e.data[1]];if(n){if(e=e.data[2]/127,null!=n.from&&null!=n.to){var t=n.from;e=t+(n.to-t)*(e-0)}this.uniforms[n.variableName].value=e,this.debouncedLogMIDIState()}}else console.log("Invalid MIDI message: "+e);else console.log("Missing MIDI list setup.")}},{key:"logMIDIState",value:function(){if(this.options.midiLogs)for(var e in console.log("==== Current MIDI state ===="),this.uniforms)0===e.indexOf("MIDI")&&console.log(e,this.uniforms[e].value.toFixed(2))}},{key:"render",value:function(e){var n=this,t=this.gl,o=this.lastTime?(e-this.lastTime)/1e3:0;this.lastTime=e,this.uniforms.iTime.value+=o,this.uniforms.iTimeDelta.value=o,this.uniforms.iFrame.value++,this.updateDOMBindings(),t.clear(t.COLOR_BUFFER_BIT),Object.keys(this.uniforms).forEach((function(e){var o=n.uniforms[e].type;o=o.match(/vec/)?"".concat(o[o.length-1],"fv"):"1".concat(o[0]),t["uniform".concat(o)](n.uniforms[e].location,n.uniforms[e].value)})),t.drawArrays(t.TRIANGLES,0,this.vertices.length/2),requestAnimationFrame(this.render)}},{key:"reportErrors",value:function(){var e=this.gl;e.getShaderParameter(this.vertexShader,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(this.vertexShader)),e.getShaderParameter(this.fragmentShader,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(this.fragmentShader)),e.getProgramParameter(this.program,e.LINK_STATUS)||console.log(e.getProgramInfoLog(this.program))}},{key:"resize",value:function(){this.canvas.width=this.uniforms.iResolution.value[0]=window.innerWidth,this.canvas.height=this.uniforms.iResolution.value[1]=window.innerHeight,this.gl.viewport(0,0,this.canvas.width,this.canvas.height)}}]),t}()}()},8:function(e,n,t){e.exports=t(24)}},[[8,1,2]]]);
//# sourceMappingURL=main.70c39e08.chunk.js.map