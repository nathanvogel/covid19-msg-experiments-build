{"version":3,"sources":["App.tsx","serviceWorker.ts","index.tsx","../../../shaderpen/dist/shaderpen.umd.js"],"names":["App","useEffect","Shaderpen","toString","midiBindings","from","to","initial","midiLogs","domBindings","elem","document","getElementById","canvas","id","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message","module","exports","l","f","a","d","length","b","enumerable","configurable","writable","Object","defineProperty","key","n","require","this","TypeError","c","g","replace","k","uniforms","iResolution","type","value","innerWidth","innerHeight","iTime","iTimeDelta","iFrame","iMouse","options","debouncedLogMIDIState","logMIDIState","setupMIDIBindings","setupDOMBindings","concat","keys","map","name","reduce","createElement","width","height","style","position","left","top","body","append","e","gl","getContext","clearColor","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","h","program","createProgram","attachShader","linkProgram","vertices","Float32Array","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","useProgram","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","forEach","getUniformLocation","reportErrors","_bind","addEventListener","mouseDown","mouseMove","mouseUp","resize","prototype","m","arguments","Array","bind","mousedown","clientX","clientY","domList","variablePrefix","push","getDOMNodeCoords","log","Symbol","iterator","next","done","return","getBoundingClientRect","bottom","right","midiList","isArray","variableName","requestMIDIAccess","inputs","values","onmidimessage","onMIDIMessage","p","data","indexOf","toFixed","lastTime","updateDOMBindings","clear","COLOR_BUFFER_BIT","drawArrays","TRIANGLES","requestAnimationFrame","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","getProgramParameter","LINK_STATUS","getProgramInfoLog","viewport"],"mappings":"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","file":"static/js/main.70c39e08.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport Shaderpen from \"shaderpen\";\n\nconst glsl = (x: TemplateStringsArray) => x.toString();\n\nfunction App() {\n  useEffect(() => {\n    new Shaderpen(\n      glsl`\n      #pragma vscode_glsllint_stage : frag\n      // Created by inigo quilez - iq/2014\n      // License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n \n      const mat2 m = mat2( 0.80,  0.60, -0.60,  0.80 );\n\n      float hash( vec2 p )\n      {\n        float h = dot(p,vec2(127.1,311.7));\n        return -1.0 + 2.0*fract(sin(h)*43758.5453123);\n      }\n\n      float noise( in vec2 p )\n      {\n          vec2 i = floor( p );\n          vec2 f = fract( p );\n        \n        vec2 u = f*f*(3.0-2.0*f);\n\n        return mix( mix(hash(i + vec2(0.0,0.0)), \n                        hash(i + vec2(1.0,0.0)), u.x),\n                    mix(hash(i + vec2(0.0,1.0)), \n                        hash(i + vec2(1.0,1.0)), u.x), u.y);\n      }\n\n      float fbm( vec2 p )\n      {\n        float f = 0.0;\n        f += 0.5000*noise( p ); p = m*p*2.02;\n        f += 0.2500*noise( p ); p = m*p*2.03;\n        f += 0.1250*noise( p ); p = m*p*2.01;\n        f += 0.0625*noise( p );\n        return f/0.9375;\n      }\n\n      vec2 fbm2( in vec2 p )\n      {\n          return vec2( fbm(p.xy), fbm(p.yx) );\n      }\n      // --- End of: Created by inigo quilez --------------------\n\n      float band(float t,  float start, float end, float blur) {\n        return (\n            smoothstep(start - blur, start + blur, t) *\n            smoothstep(end + blur, end - blur, t)\n        );\n      }\n\n      float rectangle(vec2 uv, float xStart, float xEnd, float yStart, float yEnd, vec2 blur) {\n        float band1 = band(uv.x, xStart, xEnd, blur.x);\n        float band2 = band(uv.y, yStart, yEnd, blur.y);\n        return band1 * band2;\n      }\n\n      float remap(float value, float low1, float high1, float low2, float high2) {\n        return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n      }\n\n      /**\n       * Drawing assumed to be from front to back stage (i.e. closest first):\n       * (which allows to stop as soon as opacity is 100% or above some threshold like 99.5%)\n       */\n      vec4 composeFTB(vec4 current, vec4 layer) {\n        return current + (1.0 - current.a) * vec4(layer.rgb, 1) * layer.a;\n      }\n\n      /**\n       * Drawing assumed to be from back to front stage (i.e. closest last):\n       */\n      vec4 composeBTF(vec4 current, vec4 layer) {\n        return mix(current, vec4(layer.rgb, 1.0), layer.a);\n      }\n\n      vec3 map( vec2 p )\n      {   \n          p *= 0.7;\n\n          float f = dot( fbm2( 1.0*(0.05*iTime + p + fbm2(-0.5*iTime+2.0*(p + fbm2(4.0*p)))) ), vec2(1.0,-1.0) );\n\n          float bl = smoothstep( -0.8, 0.8, f );\n\n          float ti = smoothstep( -1.0, 1.0, fbm(p) );\n\n          return mix( mix(vec3(0.50,0.00,0.00), \n                          vec3(1.00,0.75,0.35), ti ), \n                          vec3(0.00,0.00,0.02), bl );\n      }\n\n      void mainImage( out vec4 fragColor, in vec2 fragCoord )\n      {\n          vec2 p = 2.0 *(fragCoord.xy - iResolution.xy)/iResolution.y;\n          \n\n          float e = 0.04;//1.45;\n\n          vec3 colc = map( p               ); float gc = dot(colc,vec3(0.333));\n          vec3 cola = map( p + vec2(e,0.0) ); float ga = dot(cola,vec3(0.333));\n          vec3 colb = map( p + vec2(0.0,e) ); float gb = dot(colb,vec3(0.333));\n          \n          //vec3 nor = normalize( vec3(ga-gc, e, gb-gc ) );\n\n          vec3 col = colc;\n          //col += vec3(1.0,0.7,0.6)*8.0*abs(2.0*gc-ga-gb);\n          //col *= 1.0+0.2*nor.y*nor.y;\n          //col += 0.05*nor.y*nor.y*nor.y;\n          \n          \n          //vec2 q = fragCoord.xy/iResolution.xy;\n          //col *= pow(16.0*q.x*q.y*(1.0-q.x)*(1.0-q.y),0.1);\n          \n          //fragColor = vec4( col, 1.0 );\n          //vec2 a = fbm2(vec2(2.0, 1.0));\n          // vec2 a = fragCoord / iResolution.xy; \n\n          float speed = 0.5;\n          float speed1 = speed * iTime * MIDI1;\n          float speed2 = -speed * iTime;\n          vec2 theNoise = fbm2(speed1 + p + fbm2(speed2 + 2.0 * (p + fbm2(4.0*p))));\n          float noise = (theNoise.x + theNoise.y) / 2.0;\n\n          vec2 uv = fragCoord.xy/iResolution.xy;\n          vec2 blur = MIDI3 * vec2(max(iResolution.x, iResolution.y) * 0.11);\n\n          float rect = rectangle(\n            fragCoord, \n            DOM1_left - blur.x/2.0, \n            DOM1_right + blur.x/2.0, \n            DOM1_bottom - blur.y/2.0, \n            DOM1_top + blur.y/2.0, \n            blur\n          );\n          float rectBlurredMore = rectangle(\n            fragCoord, \n            DOM1_left - blur.x/2.0, \n            DOM1_right + blur.x/2.0, \n            DOM1_bottom - blur.y/2.0, \n            DOM1_top + blur.y/2.0, \n            blur * 1.8\n          );\n\n          float mask = mix(rectBlurredMore * remap(\n            noise, 0.0, 1.0, \n            rect, \n            1.0\n          ), rect, 0.5);\n\n          vec4 color = vec4(1.0);\n          color = composeBTF(color, vec4(uv, MIDI2, mask));\n\n          fragColor = color;\n      }\n      `,\n      false,\n      {\n        midiBindings: [\n          [176, 48, { from: 0, to: 10, initial: 0.8 }],\n          [176, 49],\n          [176, 50],\n          [176, 51],\n          [176, 52],\n          [176, 53],\n          [176, 54],\n          [176, 55]\n        ],\n        midiLogs: false,\n        domBindings: [{ elem: document.getElementById(\"hello\") }],\n        canvas: document.getElementById(\"background\") as HTMLCanvasElement\n      }\n    );\n  }, []);\n\n  return (\n    <div>\n      <div id=\"hello\">Hello</div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","'use strict';(function(l,m){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=m():\"function\"===typeof define&&define.amd?define(m):(l=l||self,l.ShaderPen=m())})(this,function(){function l(f,a){for(var d=0;d<a.length;d++){var b=a[d];b.enumerable=b.enumerable||!1;b.configurable=!0;\"value\"in b&&(b.writable=!0);Object.defineProperty(f,b.key,b)}}function m(f,a,d){a&&l(f.prototype,a);d&&l(f,d);return f}var n=require(\"lodash/debounce\");return function(){function f(a,d,b){if(!(this instanceof\nf))throw new TypeError(\"Cannot call a class as a function\");var c=/\\(\\s*out\\s+vec4\\s+(\\S+)\\s*,\\s*in\\s+vec2\\s+(\\S+)\\s*\\)/,g=a.match(c);a=a.replace(\"mainImage\",\"main\");a=a.replace(c,\"()\");var k=this.uniforms={iResolution:{type:\"vec3\",value:[window.innerWidth,window.innerHeight,0]},iTime:{type:\"float\",value:0},iTimeDelta:{type:\"float\",value:0},iFrame:{type:\"int\",value:0},iMouse:{type:\"vec4\",value:[0,0,0,0]}};this.options=b;this.debouncedLogMIDIState=n(this.logMIDIState,1E3);this.setupMIDIBindings();\nthis.setupDOMBindings();a=(g?\"#define \".concat(g[1],\" gl_FragColor\\n#define \").concat(g[2],\" gl_FragCoord.xy\\n\"):\"\")+a;a=Object.keys(k).map(function(a){return{name:a,type:k[a].type}}).reduce(function(a,b){return a+\"uniform \".concat(b.type,\" \").concat(b.name,\";\\n\")},\"\")+a;a=\"precision highp float;\\n\"+a;b=this.canvas=(c=b&&b.canvas)?b.canvas:document.createElement(\"canvas\");b.width=window.innerWidth;b.height=window.innerHeight;b.style.position=\"fixed\";b.style.left=0;b.style.top=0;c||document.body.append(b);\nvar e=this.gl=b.getContext(\"webgl\");e.clearColor(0,0,0,0);b=this.vertexShader=e.createShader(e.VERTEX_SHADER);e.shaderSource(b,\"\\n      attribute vec2 position;\\n      void main() {\\n      gl_Position = vec4(position, 0.0, 1.0);\\n      }\\n    \");e.compileShader(b);c=this.fragmentShader=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(c,a);e.compileShader(c);var h=this.program=e.createProgram();e.attachShader(h,b);e.attachShader(h,c);e.linkProgram(h);a=this.vertices=new Float32Array([-1,1,1,1,1,-1,\n-1,1,1,-1,-1,-1]);b=this.buffer=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,b);e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW);e.useProgram(h);h.position=e.getAttribLocation(h,\"position\");e.enableVertexAttribArray(h.position);e.vertexAttribPointer(h.position,2,e.FLOAT,!1,0,0);Object.keys(k).forEach(function(a,b){k[a].location=e.getUniformLocation(h,a)});this.reportErrors();this._bind(\"mouseDown\",\"mouseMove\",\"mouseUp\",\"render\",\"resize\",\"setupMIDIBindings\",\"onMIDIMessage\",\"logMIDIState\",\"setupDOMBindings\",\n\"updateDOMBindings\");window.addEventListener(\"mousedown\",this.mouseDown);window.addEventListener(\"mousemove\",this.mouseMove);window.addEventListener(\"mouseup\",this.mouseUp);window.addEventListener(\"resize\",this.resize);\"NO_RENDER\"!==d&&this.render()}m(f,[{key:\"_bind\",value:function(){for(var a=this,d=arguments.length,b=Array(d),c=0;c<d;c++)b[c]=arguments[c];b.forEach(function(b){return a[b]=a[b].bind(a)})}},{key:\"mouseDown\",value:function(a){this.mousedown=!0;this.uniforms.iMouse.value[2]=a.clientX;\nthis.uniforms.iMouse.value[3]=a.clientY}},{key:\"mouseMove\",value:function(a){this.mousedown&&(this.uniforms.iMouse.value[0]=a.clientX,this.uniforms.iMouse.value[1]=a.clientY)}},{key:\"mouseUp\",value:function(a){this.mousedown=!1;this.uniforms.iMouse.value[2]=0;this.uniforms.iMouse.value[3]=0}},{key:\"setupDOMBindings\",value:function(){if(this.options&&this.options.domBindings){var a=this.options.domBindings;this.domList=[];for(var d=0;d<a.length;d+=1){var b=a[d];if(b&&b.elem){b={elem:b.elem,variablePrefix:\"DOM\".concat(d+\n1,\"_\")};this.domList.push(b);b=this.getDOMNodeCoords(b);for(var c in b)this.uniforms[c]={type:\"float\",value:b[c]}}else console.log(\"Invalid DOM binding: \"+b)}}}},{key:\"updateDOMBindings\",value:function(){var a=!0,d=!1,b=void 0;try{for(var c=this.domList[Symbol.iterator](),g;!(a=(g=c.next()).done);a=!0){var k=this.getDOMNodeCoords(g.value),e;for(e in k)this.uniforms[e].value=k[e]}}catch(h){d=!0,b=h}finally{try{a||null==c.return||c.return()}finally{if(d)throw b;}}}},{key:\"getDOMNodeCoords\",value:function(a){var d=\na.elem.getBoundingClientRect(),b={};b[a.variablePrefix+\"top\"]=window.innerHeight-d.top;b[a.variablePrefix+\"bottom\"]=window.innerHeight-d.bottom;b[a.variablePrefix+\"left\"]=d.left;b[a.variablePrefix+\"right\"]=d.right;b[a.variablePrefix+\"height\"]=d.height;b[a.variablePrefix+\"width\"]=d.width;return b}},{key:\"setupMIDIBindings\",value:function(){var a=this;if(this.options&&this.options.midiBindings){this.midiList={};for(var d=this.options.midiBindings,b=0;b<d.length;b+=1){var c=d[b];if(!Array.isArray(c)||\n2>c.length)console.log(\"Invalid MIDI command/note: \"+c),console.log(\"It should be an array of [command, note].\");else{var g=c[0]+\"_\"+c[1];c=3<=c.length&&c[2]?c[2]:{};c.variableName=c.variableName||\"MIDI\"+(b+1);this.uniforms[c.variableName]={type:\"float\",value:\"number\"==typeof c.initial?c.initial:1};this.midiList[g]=c}}navigator.requestMIDIAccess?navigator.requestMIDIAccess().then(function(b){a.options.midiLogs&&console.log(\"Successful MIDI setup:\",b);var d=!0,c=!1,k=void 0;try{for(var g=b.inputs.values()[Symbol.iterator](),\nf;!(d=(f=g.next()).done);d=!0)f.value.onmidimessage=a.onMIDIMessage}catch(p){c=!0,k=p}finally{try{d||null==g.return||g.return()}finally{if(c)throw k;}}},function(){console.log(\"Could not setup MIDI devices.\")}):console.log(\"WebMIDI is not supported in this browser.\")}}},{key:\"onMIDIMessage\",value:function(a){if(this.midiList)if(a){var d=this.midiList[a.data[0]+\"_\"+a.data[1]];if(d){a=a.data[2]/127;if(null!=d.from&&null!=d.to){var b=d.from;a=b+(d.to-b)*(a-0)}this.uniforms[d.variableName].value=a;this.debouncedLogMIDIState()}}else console.log(\"Invalid MIDI message: \"+\na);else console.log(\"Missing MIDI list setup.\")}},{key:\"logMIDIState\",value:function(){if(this.options.midiLogs){console.log(\"==== Current MIDI state ====\");for(var a in this.uniforms)0===a.indexOf(\"MIDI\")&&console.log(a,this.uniforms[a].value.toFixed(2))}}},{key:\"render\",value:function(a){var d=this,b=this.gl,c=this.lastTime?(a-this.lastTime)/1E3:0;this.lastTime=a;this.uniforms.iTime.value+=c;this.uniforms.iTimeDelta.value=c;this.uniforms.iFrame.value++;this.updateDOMBindings();b.clear(b.COLOR_BUFFER_BIT);\nObject.keys(this.uniforms).forEach(function(a){var c=d.uniforms[a].type;c=c.match(/vec/)?\"\".concat(c[c.length-1],\"fv\"):\"1\".concat(c[0]);b[\"uniform\".concat(c)](d.uniforms[a].location,d.uniforms[a].value)});b.drawArrays(b.TRIANGLES,0,this.vertices.length/2);requestAnimationFrame(this.render)}},{key:\"reportErrors\",value:function(){var a=this.gl;a.getShaderParameter(this.vertexShader,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(this.vertexShader));a.getShaderParameter(this.fragmentShader,a.COMPILE_STATUS)||\nconsole.log(a.getShaderInfoLog(this.fragmentShader));a.getProgramParameter(this.program,a.LINK_STATUS)||console.log(a.getProgramInfoLog(this.program))}},{key:\"resize\",value:function(){this.canvas.width=this.uniforms.iResolution.value[0]=window.innerWidth;this.canvas.height=this.uniforms.iResolution.value[1]=window.innerHeight;this.gl.viewport(0,0,this.canvas.width,this.canvas.height)}}]);return f}()});\n"],"sourceRoot":""}